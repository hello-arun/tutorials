# Setup

Piezoelectric stress coefficient are denoted as $e_{ij}$ in reduced notation. It measures the rate of change of induced polarization along the $i$ direction when strain is applied along $j$ direction. This is however the improper piezoelectriic coefficient, the proper piezoelectric coeffieicnts are calculated as follows

$$
e_{ijk} = \frac{\partial P_{i}(\epsilon_{jk})}{\partial\epsilon_{jk}}
+\delta_{jk}P_{i}(0)-\delta_{ij}P_{k}(0),
$$

So we have two variables

1. Strain Direction
2. Polarization Direction

And these need to be setup among all files. So we have to modify files accordingly. Some reference is provided here but always check carefully.

### `POSCAR`

**_POSCAR file must have fully relaxed structure._**

### `runSetup.sh`

```bash
# You need to change these parameter as per your calculation setup
strains=$(seq -0.01 0.002 0.01) # Values of strains
axis="x" # "x" or "y" axis of strain
```

### `runCalcPol[Shaheen|Ibex].sbatch`

This file calculate the polarization of strained structres as generated by `runSetup.sh`. To control the direction along which the polarization need to be calculated by berry phase approach you need to change `IGPAR` parameter in this script file

```bash
echo """\
# Polarization LBERRY Method
LBERRY = .TRUE.
IGPAR = 1 # 1: x-axis, 2:y-axis ...
NPPSTR = 15
# DIPOL = 0.10 0.10 0.50 # <Optinal>
""" >> $calcDIR/INCAR
```

### `getPol.sh`

You need to set these variable in this file accordingly

```bash
strains=$(seq -0.010 0.002 0.010)
polAxis="1" # Axis along which polarization is
            # calculated by berry phase. this is actually IGPAR in INCAR
strainAxisLabel="X" # Axis along which strain is applied
```
